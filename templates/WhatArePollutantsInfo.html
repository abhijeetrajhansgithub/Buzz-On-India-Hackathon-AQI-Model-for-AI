<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AQI Index</title>
    <link rel="stylesheet" href="../static/css/HomeStyles.css">
    <link rel="stylesheet" href="../static/css/popStyle.css">
    <link rel="stylesheet" href="../static/css/CommunityForum.css">
    <link rel="stylesheet" href="../static/css/ChatBot.css">
    <link rel="stylesheet" href="../static/css/Summarizer.css">
    <link rel="stylesheet" href="../static/css/InfoStyles.css">
    <link rel="stylesheet" href="../static/css/SuggestionsModal.css">

</head>
<body>
    <center>
        <div class="top">
            <p id="heading"><i>Webai</i> AQI - <i>The Air Quality Monitoring Platform</i></p>
            <h4 style="margin-top: -20px">Your own <i>Pollution Scanner!</i></h4>
        </div>
        <h1>About the Pollutants</h1>
            <hr>
    </center>
    
    <div class="container">
    
        <div class="main">
            <div id="CO" class="pollutants">
                <h2>1. Carbon Monoxide (CO)</h2>
                <p><i>CO is a colorless, odorless gas produced from burning fossil fuels, such as coal, oil, gas, or wood, when combustion is incomplete.</i></p>
                <h3>Health Effects:</h3>
                <p>CO binds to hemoglobin in red blood cells, preventing them from carrying oxygen to tissues and organs. Exposure can cause symptoms like headaches, dizziness, weakness, nausea, and confusion. High levels can lead to unconsciousness or death, especially in enclosed spaces.</p>
            </div>
            
            <div id="NO" class="pollutants">
                <h2>2. Nitric Oxide (NO)</h2>
                <p><i>NO is a reactive gas formed during combustion processes, especially in vehicles and power plants. It is a precursor to nitrogen dioxide (NO‚ÇÇ).</i></p>
                <h3>Health Effects:</h3> 
                <p>Although NO itself is less harmful than NO‚ÇÇ, it plays a role in forming ground-level ozone and fine particulate matter, both of which have adverse health effects.</p>
            </div>
            
            <div id="NO2" class="pollutants">
                <h2>3. Nitrogen Dioxide (NO‚ÇÇ)</h2>
                <p><i>NO‚ÇÇ is a reddish-brown gas produced by burning fuel in vehicles, power plants, and industrial facilities.</i></p>
                <h3>Health Effects:</h3>
                <p>NO‚ÇÇ irritates the respiratory system, causing coughing, wheezing, and shortness of breath. Long-term exposure may reduce lung function and increase the risk of respiratory infections. It also contributes to the formation of ground-level ozone and particulate matter, which further harms health.</p>
            </div>

            <div id="O3" class="pollutants">
                <h2>4. Ozone (O‚ÇÉ)</h2>
                <p><i>Ozone at ground level is a harmful air pollutant formed when NO‚ÇÇ and volatile organic compounds (VOCs) react in sunlight. It's different from the ozone in the upper atmosphere, which protects us from UV radiation.</i></p>
                <h3>Health Effects:</h3>
                <p>Ground-level ozone can cause respiratory problems, including throat irritation, coughing, shortness of breath, and aggravation of asthma. Long-term exposure may lead to chronic respiratory diseases, reduced lung function, and even lung damage.</p>
            </div>
            
            <div id="SO2" class="pollutants">
                <h2>5. Sulfur Dioxide (SO‚ÇÇ)</h2>
                <p><i>SO‚ÇÇ is a colorless gas with a pungent odor, produced from burning fossil fuels (especially coal and oil) in power plants and industrial facilities.</i></p>
                <h3>Health Effects:</h3>
                <p>SO‚ÇÇ can irritate the respiratory system, leading to coughing, mucus secretion, and worsening of asthma and chronic bronchitis. Short-term exposure can cause breathing problems, and long-term exposure can harm the respiratory and cardiovascular systems. SO‚ÇÇ also contributes to the formation of acid rain, which damages ecosystems.</p>
            </div>
            
            <div id="PM" class="pollutants">
                <h2>6. Particulate Matter (PM2.5 and PM10)</h2>
                <p><i>
                    <ul>
                        <li><b>PM2.5:</b> Particles with a diameter of 2.5 microns or smaller.</li>
                        <li><b>PM10:</b> Particles with a diameter of 10 microns or smaller.</li>
                    </ul>
                </i></p>
                <h3>Health Effects:</h3>
                <ul>
                    <li><b>PM2.5:</b> Long-term exposure is linked to heart attacks, strokes, lung cancer, and reduced lung function. It can also worsen asthma and bronchitis.</li>
                    <li><b>PM10:</b> Causes respiratory issues, coughing, and aggravated asthma and bronchitis. Both PM2.5 and PM10 can lead to premature death in people with pre-existing health conditions.</li>
                </ul>
            </div>
            
        </div>

        <div class="sidebar">
            <ul>
                <li><a href="{{ url_for('city_report') }}">City Report</a></li>
                <li><a id="manual_input">Manually Input</a></li>
                <li><a href="{{ url_for('return_home') }}">Home Page</a></li>
                <li><a href="{{ url_for('pollution_factors') }}">Pollution Factors</a></li>
                <li ><a id="AQI_update">Get Latest AQI Update</a></li>
                <li id="get_email_update"><a> Enter Email for Update</a></li>
            </ul>
        </div>
    </div>

        <div id="manualInputModal" class="modal">
            <div class="modal-content" id="manual-input-modal-content">
                <span class="close" id="closeManualInput">&times;</span>
                <h2>Give your inputs:</h2>
            <form id="inputForm">
    
                    <label for="co">CO (Carbon Monoxide) Amount:</label><br>
                    <input type="text" id="co" name="co" required><br><br>
    
                    <label for="no">NO (Nitric Oxide) amount:</label><br>
                    <input type="text" id="no" name="no" required><br><br>
    
                    <label for="no2">NO<sub>2</sub> (Nitrogen Dioxide)</label><br>
                    <input type="text" id="no2" name="no2" required><br><br>
    
                    <label for="so2">SO<sub>2</sub> (Sulphur Dioxide)</label><br>
                    <input type="text" id="so2" name="so2" required><br><br>
    
                    <label for="o3">O<sub>3</sub> (Ozone)</label><br>
                    <input type="text" id="o3" name="o3" required><br><br>
    
                    <label for="nh3">NH<sub>3</sub> (Ammonia)</label><br>
                    <input type="text" id="nh3" name="nh3" required><br><br>
    
                    <input id="submit_btn" type="submit" value="Submit">
                    <p id="result"><span></span> </p>
                </form>
            </div>
        </div>
        <!-- Modal for AQI Update -->
        <!-- Modal for AQI Update -->
        <div id="AQIupdateModel" class="modal">
            <div class="modal-content">
                <span class="close" id="closeAQIUpdate">&times;</span>
                <h2>Get Latest AQI update</h2>
                <form id="inputForm-for-aqi">
                    <center><input id="get-aqi-update-result-button" type="submit" value="GET RESULT!"></center>
                    <p id="aqi-update-result"><span></span></p>
                </form>
            </div>
        </div>

        <div id="EnterEmail" class="modal">
            <div class="modal-content">
                <span class="close" id="closeEmail">&times;</span>
                <h3>Now notifications in your MailBox! </h3>
                <form id="inputForm-for-email">
                    <br>
                    <label for="User_email">Enter your email to receive notifications about the Air Quality</label><br><br>
                    <input type="text" id="User_email" name="User_email" required><br><br>
                    <center><input id="submit_email_btn" type="submit" value="Submit"></center><br>
                    <p id="emailing-result"><span></span> </p>
                </form>
            </div>
        </div>
        <div class="chatbot-icon" id="chatbotIcon">ü§ñ</div>
    
        <!-- Modal for ChatBot -->
        <div id="chatbotModal" class="modal">
            <div class="modal-contentBOT">
                <span class="close" id="closeModal">&times;</span>
                <h2>Hi there! I'm AirBuddy, here to help you.</h2>
                <h4>What can I assist you with?</h4>
                <div id="conversationHistory" class="conversation-history"></div>
                <label for="userInput"></label><input type="email" id="userInput" placeholder="Enter your Query...">
                <button id="submitBtn">Submit</button>
            </div>
        </div>

    <!-- Community Forum Icon -->
    <div class="community-forum-icon" id="communityForumIcon">üó£Ô∏è</div>

    <div id="communityForumModal" class="modal">
        <div class="modal-content-forum">
            <span class="close" id="closeForumModal">&times;</span>
            <h2>Welcome to the Community Forum!</h2>
            <h4>How can we help you today?
                <span id="summarizerLabel" class="summarize-label">Summarize</span>
                <!-- Summarizer Popup -->
                <div id="summarizerPopup" class="summarizer-popup">
                    <div id="summarizerText" class="gradient-text">Loading...</div>
                </div>
            </h4>
            <div id="forumConversationHistory" class="forum-conversation-history"></div>
            <label for="forumUserInput"></label>
            <input type="text" id="forumUserInput" placeholder="Ask your question...">
            <button id="forumSubmitBtn">Submit</button>
        </div>
    </div>

        <!-- Suggestions Icon -->
    <div class="suggestions-icon" id="suggestionsIcon">üí°</div>

    <!-- Modal Structure -->
    <div id="suggestionsModal" class="suggestions-modal">
        <div class="suggestions-modal-content">
            <span class="suggestions-close" id="suggestions-modalClose">&times;</span>
            <h2>Air Quality Index (AQI) Suggestions</h2>
            <div id="aqiContent">
                <h3>AQI Scale Overview</h3>
                <p>The Air Quality Index (AQI) is a system used to measure and report air quality. The AQI is divided into five categories, each representing a different level of health concern.</p>

                <h4>AQI Level 1: Good (0-50)</h4>
                <p>Air quality is considered satisfactory, and air pollution poses little or no risk. People can continue with normal outdoor activities.</p>
                <h5>Health Effects:</h5>
                <p>None.</p>
                <h5>Solutions:</h5>
                <p>No specific actions needed.</p>

                <h4>AQI Level 2: Moderate (51-100)</h4>
                <p>Air quality is acceptable; however, there may be a concern for some people, particularly those who are unusually sensitive to air pollution.</p>
                <h5>Health Effects:</h5>
                <p>Some people may experience respiratory symptoms.</p>
                <h5>Solutions:</h5>
                <p>Sensitive individuals should consider limiting prolonged outdoor exertion.</p>

                <h4>AQI Level 3: Unhealthy for Sensitive Groups (101-150)</h4>
                <p>Members of sensitive groups may experience health effects. The general public is not likely to be affected.</p>
                <h5>Health Effects:</h5>
                <p>Individuals with respiratory or heart conditions, children, and older adults may experience health effects.</p>
                <h5>Solutions:</h5>
                <p>Limit outdoor activities for sensitive individuals; others may continue normal activities.</p>

                <h4>AQI Level 4: Unhealthy (151-200)</h4>
                <p>Everyone may begin to experience health effects; members of sensitive groups may experience more serious health effects.</p>
                <h5>Health Effects:</h5>
                <p>Increased respiratory symptoms and decreased lung function are possible.</p>
                <h5>Solutions:</h5>
                <p>Avoid outdoor activities and keep windows closed; consider using air purifiers.</p>

                <h4>AQI Level 5: Very Unhealthy (201-300)</h4>
                <p>Health alert: everyone may experience more serious health effects.</p>
                <h5>Health Effects:</h5>
                <p>Increased risk of respiratory effects for everyone.</p>
                <h5>Solutions:</h5>
                <p>Stay indoors, use air purifiers, and limit outdoor activities.</p>
            </div>
        </div>
    </div>

    
    
        <script src="../static/js/pop_widow.js"></script> <!-- Ensure this file exists -->
        <script src="../static/js/ChatBot.js"></script>
        <script src="../static/js/EnterEmail.js"></script>
        <script src="../static/js/LatestAQIUpdate.js"></script>
        <script src="../static/js/CommunityForum.js"></script>
        <script src="../static/js/SuggestionsModal.js"></script>
        <script src="../static/js/Summarizer.js"></script>
    
        <script>
    
            // Event listener for form submission
    document.getElementById('inputForm').addEventListener('submit', async function(event) {
        event.preventDefault();  // Prevent the default form submission
    
        // Get the input values
        const co = document.getElementById('co').value;
        const no = document.getElementById('no').value;
        const no2 = document.getElementById('no2').value;
        const so2 = document.getElementById('so2').value;
        const o3 = document.getElementById('o3').value;
        const nh3 = document.getElementById('nh3').value;
    
        // Prepare the data to send to the server
        const inputData = {
            co: co,
            no: no,
            no2: no2,
            so2: so2,
            o3: o3,
            nh3: nh3
        };
    
        try {
            // Make the fetch request to the backend
            const response = await fetch('/process_input_for_aqi', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(inputData)
            });
    
            if (response.ok) {
                // Get JSON response from Flask
                const result = await response.json();
    
                // Log the result to check its structure
                console.log('Full response from Flask:', result);
    
                // Display the HTML message directly
                const resultElement = document.getElementById('result');
                if (resultElement) {
                    resultElement.innerHTML = result.message;  // Use innerHTML to insert HTML content
                    scrollToBottom_aqi()
                } else {
                    console.error('Result element not found');
                }
            } else {
                document.getElementById('result').textContent = 'Error occurred while processing';
            }
        } catch (error) {
            console.error('Error:', error);
            document.getElementById('result').textContent = 'Error occurred while processing';
        }
    });
    
    
        </script>

        <script>
        function scrollToBottom_aqi() {
            // Select the modal content within the modal
            const conversationHistory = document.getElementById('manual-input-modal-content');

            // Check if the element exists to avoid errors
            if (conversationHistory) {
                // Scroll to the bottom of the modal content
                conversationHistory.scrollTop = conversationHistory.scrollHeight;
            } else {
                console.error('Element not found: #manualInputModal .modal-content');
            }
        }
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
        const modal = document.getElementById('EnterEmail');
        const closeModalBtn = document.getElementById('closeEmail');
        const form = document.getElementById('inputForm-for-email');
        const resultElement = document.getElementById('emailing-result').querySelector('span');

        // Close modal when the "x" button is clicked
        closeModalBtn.onclick = function() {
            modal.style.display = 'none';
        };

        // Handle form submission
        form.addEventListener('submit', function(event) {
            event.preventDefault(); // Prevent form from refreshing the page

            // Get the email input value
            const userEmail = document.getElementById('User_email').value;

            // Send the email to the Flask backend using POST
            fetch('/submit_email', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ User_email: userEmail })
            })
            .then(response => response.json())
            .then(data => {
                // Display the result (Success or Failed) in the modal
                resultElement.innerHTML = data.message;
                resultElement.style.color = 'green';
            })
            .catch(error => {
                console.error('Error:', error);
                resultElement.innerHTML = 'Failed!';
                resultElement.style.color = 'red';
            });
        });

        // Optional: If you want the modal to close when clicked outside the modal content
        window.onclick = function(event) {
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        };
    });

    </script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
        const chatbotModal = document.getElementById('chatbotModal');
        const closeModalBtn = document.getElementById('closeModal');

        // Close modal when the "x" button is clicked
        closeModalBtn.onclick = function() {
            chatbotModal.style.display = 'none';
        };

        // Close modal when clicking outside the modal content
        window.onclick = function(event) {
            if (event.target === chatbotModal) {
                chatbotModal.style.display = 'none';
            }
        };
    });
    </script>
    
    </body>
    </html>
    